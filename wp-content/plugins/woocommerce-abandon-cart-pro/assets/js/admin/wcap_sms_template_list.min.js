jQuery(document).ready(function(){jQuery('[id^="sms_txt_"]').on("click",function(){var e=this.id.split("_")[2],t='<td class="txt_msg column-txt_msg"><textarea class="msg" rows="4">'+jQuery("tr#sms_"+e+" td.full_txt_msg").html()+"</textarea></td>";jQuery("tr#sms_"+e+" td.txt_msg").replaceWith(t),jQuery("tr#sms_"+e+" td.updated").html("1")}),jQuery(".sms_template_ids").on("change",'[id^="freq_value_"]',function(){var e=this.id,t=e.split("_")[2];switch(jQuery("#"+e).val()){case"hours":var a=23;break;case"minutes":a=59;break;case"days":a=90}for(var s=jQuery("#freq_count_"+t).val(),l="<select id='freq_count_"+t+"'>",r=1;r<=a;r++)l+="<option value='"+r+"'>"+r+"</option>";l+="</select>",jQuery("#freq_count_"+t).replaceWith(l),s<=a&&jQuery("#freq_count_"+t).val(s),jQuery("tr#sms_"+t+" td.updated").html("1")}),jQuery(".sms_template_ids").on("click",".delete_sms",function(){var e=this.id.split("_")[1],t={template_id:e,action:"wcap_delete_sms_template"};jQuery.post(wcap_sms_params.ajax_url,t,function(t){jQuery("#sms_"+e).remove()})}),jQuery(document).on("click",".sms_bulk_save",function(){var e={};jQuery('.sms_template_ids tr[id^="sms_"]').each(function(t,a){var s=this.id,l=jQuery(this).find(".updated").html(),r=jQuery(this).find('textarea[class="msg"]').val();if(void 0==r&&(r=jQuery(this).find(".full_txt_msg").html()),"1"==l&&""!=r){s=s.split("_")[1];var u=jQuery(this).find('select[id^="freq_count"]').val();u+=" "+jQuery(this).find('select[id^="freq_value"]').val();var _=jQuery(this).find(".wcap-switch.wcap-toggle-template-status").attr("wcap-template-switch"),i=jQuery(this).find('select[id^="coupon_ids"]').val();e[s]=r+"|"+u+"|"+_+"|"+i}});var t={template_data:JSON.stringify(e),action:"wcap_save_bulk_sms_template"};jQuery.post(wcap_sms_params.ajax_url,t,function(e){location.reload()})}),jQuery("#new_sms").on("click",function(){var e=jQuery("#new_template_id").val();row=jQuery("<tr id=sms_"+e+"></tr>"),col1=jQuery(jQuery("#cb_default").val()),col2=jQuery(jQuery("#id_default").val()),col3=jQuery(jQuery("#updated_default").val()),col4=jQuery(jQuery("#txt_msg_default").val()),col5=jQuery(jQuery("#full_txt_msg_default").val()),col6=jQuery(jQuery("#coupon_code_default").val()),col7=jQuery(jQuery("#sent_time_default").val()),col8=jQuery(jQuery("#sms_sent_default").val()),col9=jQuery(jQuery("#activate_default").val()),col10=jQuery(jQuery("#actions_default").val()),row.append(col1,col2,col3,col4,col5,col6,col7,col8,col9).prependTo(".sms_template_ids");var t=jQuery("#new_template_id").val();t++,jQuery("#new_template_id").val(t)}),jQuery("[id^='coupon_ids_']").on("change",function(){var e=this.id.split("_")[2];jQuery("tr#sms_"+e+" td.updated").html("1")}),jQuery(".sms_template_ids").on("change",'[id^="freq_count_"]',function(){var e=this.id.split("_")[2];jQuery("tr#sms_"+e+" td.updated").html("1")})});